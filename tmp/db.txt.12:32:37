========== mysqldumpslow ==========

[ DB LOG -- 12:32:37(isucon7-1) ]

[(1) Top 5 Query Time ]

Count: 1506  Time=0.32s (482s)  Lock=0.00s (0s)  Rows=15.9 (23921), isucon[isucon]@localhost
  SELECT * FROM image WHERE name = 'S'

Count: 7524  Time=0.00s (31s)  Lock=0.00s (0s)  Rows=1.0 (7524), isucon[isucon]@localhost
  SELECT COUNT(*) as cnt FROM message WHERE channel_id = 'S'

Count: 7567  Time=0.00s (1s)  Lock=0.00s (0s)  Rows=0.0 (71), isucon[isucon]@localhost
  SELECT * FROM haveread WHERE user_id = 'S' AND channel_id = 'S'

Count: 9242  Time=0.00s (1s)  Lock=0.00s (0s)  Rows=1.0 (9242), isucon[isucon]@localhost
  SELECT name, display_name, avatar_icon FROM user WHERE id = 'S'

Count: 115  Time=0.00s (0s)  Lock=0.00s (0s)  Rows=0.0 (0), isucon[isucon]@localhost
  INSERT INTO haveread (user_id, channel_id, message_id, updated_at, created_at) VALUES ('S', 'S', 'S', NOW(), NOW()) ON DUPLICATE KEY UPDATE message_id = 'S', updated_at = NOW()

[(2) TOP 5 Query AVG ]

Count: 1506  Time=0.32s (482s)  Lock=0.00s (0s)  Rows=15.9 (23921), isucon[isucon]@localhost
  SELECT * FROM image WHERE name = 'S'

Count: 1  Time=0.01s (0s)  Lock=0.00s (0s)  Rows=0.0 (0), isucon[isucon]@fp276e857c.stmb106.ap.nuro.jp
  SELECT TRIGGER_NAME FROM information_schema.TRIGGERS WHERE TRIGGER_SCHEMA = 'S'

Count: 28  Time=0.01s (0s)  Lock=0.00s (0s)  Rows=12.1 (338), isucon[isucon]@localhost
  SELECT * FROM message WHERE channel_id = 'S' ORDER BY id DESC LIMIT N OFFSET N

Count: 9  Time=0.01s (0s)  Lock=0.01s (0s)  Rows=0.0 (0), isucon[isucon]@localhost
  INSERT INTO image (name, data) VALUES ('S', 'S')

Count: 12  Time=0.01s (0s)  Lock=0.00s (0s)  Rows=0.0 (0), isucon[isucon]@fp276e857c.stmb106.ap.nuro.jp
  SELECT ROUTINE_NAME FROM information_schema.routines WHERE ROUTINE_SCHEMA = 'S' and ROUTINE_TYPE='S'




[(3) TOP 5 Query Count ]

Count: 9242  Time=0.00s (1s)  Lock=0.00s (0s)  Rows=1.0 (9242), isucon[isucon]@localhost
  SELECT name, display_name, avatar_icon FROM user WHERE id = 'S'

Count: 7567  Time=0.00s (1s)  Lock=0.00s (0s)  Rows=0.0 (71), isucon[isucon]@localhost
  SELECT * FROM haveread WHERE user_id = 'S' AND channel_id = 'S'

Count: 7524  Time=0.00s (31s)  Lock=0.00s (0s)  Rows=1.0 (7524), isucon[isucon]@localhost
  SELECT COUNT(*) as cnt FROM message WHERE channel_id = 'S'

Count: 2475  Time=0.00s (0s)  Lock=0.00s (0s)  Rows=15.5 (38480), isucon[isucon]@localhost
  #

Count: 2475  Time=0.00s (0s)  Lock=0.00s (0s)  Rows=0.0 (0), 0users@0hosts
  administrator command: Quit




========== pt-query-digest ==========


# 4.7s user time, 50ms system time, 35.63M rss, 89.91M vsz
# Current date: Sat Nov 14 12:32:44 2020
# Hostname: isucon7-1
# Files: /var/log/mysql/slow.log

# 4.8s user time, 50ms system time, 35.70M rss, 89.91M vsz
# Current date: Sat Nov 14 12:32:44 2020
# Hostname: isucon7-1
# Files: /var/log/mysql/slow.log

# 4.8s user time, 50ms system time, 35.71M rss, 89.91M vsz
# Current date: Sat Nov 14 12:32:44 2020
# Hostname: isucon7-1
# Files: /var/log/mysql/slow.log
