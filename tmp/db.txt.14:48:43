========== mysqldumpslow ==========

[ DB LOG -- 14:48:43(isucon7-1) ]

[(1) Top 5 Query Time ]

Count: 2171  Time=0.00s (10s)  Lock=0.00s (0s)  Rows=15.7 (34137), isucon[isucon]@[127.0.0.1]
  SELECT * FROM image WHERE name = 'S'

Count: 15800  Time=0.00s (1s)  Lock=0.00s (0s)  Rows=0.0 (149), isucon[isucon]@[127.0.0.1]
  SELECT * FROM haveread WHERE user_id = 'S' AND channel_id = 'S'

Count: 15658  Time=0.00s (1s)  Lock=0.00s (0s)  Rows=0.2 (3098), isucon[isucon]@[127.0.0.1]
  SELECT COUNT(*) as cnt FROM message WHERE channel_id = 'S'

Count: 2891  Time=0.00s (0s)  Lock=0.00s (0s)  Rows=0.0 (0), isucon[isucon]@[127.0.0.1]
  SET SESSION sql_mode='S'

Count: 5113  Time=0.00s (0s)  Lock=0.00s (0s)  Rows=0.2 (871), isucon[isucon]@[127.0.0.1]
  SELECT name, display_name, avatar_icon FROM user WHERE id = 'S'

[(2) TOP 5 Query AVG ]

Count: 1  Time=0.04s (0s)  Lock=0.10s (0s)  Rows=1.0 (1), debian-sys-maint[debian-sys-maint]@localhost
  SELECT ENGINE,SUM(DATA_LENGTH+INDEX_LENGTH),COUNT(ENGINE),SUM(DATA_LENGTH),SUM(INDEX_LENGTH) FROM information_schema.TABLES WHERE TABLE_SCHEMA NOT IN ('S', 'S', 'S') AND ENGINE IS NOT NULL GROUP BY ENGINE ORDER BY ENGINE ASC

Count: 1  Time=0.04s (0s)  Lock=0.07s (0s)  Rows=1.0 (1), debian-sys-maint[debian-sys-maint]@localhost
  SELECT COUNT(TABLE_NAME) FROM information_schema.TABLES WHERE TABLE_SCHEMA NOT IN ('S','S', 'S') AND Data_free > N AND NOT ENGINE='S'

Count: 1  Time=0.03s (0s)  Lock=0.00s (0s)  Rows=31.0 (31), debian-sys-maint[debian-sys-maint]@localhost
  SHOW TABLE STATUS FROM `mysql`

Count: 2  Time=0.02s (0s)  Lock=0.02s (0s)  Rows=1.0 (2), debian-sys-maint[debian-sys-maint]@localhost
  SELECT IFNULL(SUM(INDEX_LENGTH),N) FROM information_schema.TABLES WHERE TABLE_SCHEMA NOT IN ('S') AND ENGINE = 'S'

Count: 1  Time=0.02s (0s)  Lock=0.02s (0s)  Rows=2.0 (2), debian-sys-maint[debian-sys-maint]@localhost
  SELECT CONCAT(CONCAT(TABLE_SCHEMA, 'S'), TABLE_NAME) FROM information_schema.TABLES WHERE TABLE_SCHEMA NOT IN ('S','S', 'S') AND Data_free > N AND NOT ENGINE='S'




[(3) TOP 5 Query Count ]

Count: 15800  Time=0.00s (1s)  Lock=0.00s (0s)  Rows=0.0 (149), isucon[isucon]@[127.0.0.1]
  SELECT * FROM haveread WHERE user_id = 'S' AND channel_id = 'S'

Count: 15658  Time=0.00s (1s)  Lock=0.00s (0s)  Rows=0.2 (3098), isucon[isucon]@[127.0.0.1]
  SELECT COUNT(*) as cnt FROM message WHERE channel_id = 'S'

Count: 5113  Time=0.00s (0s)  Lock=0.00s (0s)  Rows=0.2 (871), isucon[isucon]@[127.0.0.1]
  SELECT name, display_name, avatar_icon FROM user WHERE id = 'S'

Count: 3522  Time=0.00s (0s)  Lock=0.00s (0s)  Rows=10.1 (35602), 2users@3hosts
  #

Count: 3521  Time=0.00s (0s)  Lock=0.00s (0s)  Rows=0.0 (0), 0users@0hosts
  administrator command: Quit




========== pt-query-digest ==========


# 6.9s user time, 40ms system time, 39.07M rss, 93.40M vsz
# Current date: Sat Nov 14 14:48:54 2020
# Hostname: isucon7-1
# Files: /var/log/mysql/slow.log

# 7s user time, 40ms system time, 39.15M rss, 93.40M vsz
# Current date: Sat Nov 14 14:48:54 2020
# Hostname: isucon7-1
# Files: /var/log/mysql/slow.log

# 7s user time, 40ms system time, 39.15M rss, 93.40M vsz
# Current date: Sat Nov 14 14:48:54 2020
# Hostname: isucon7-1
# Files: /var/log/mysql/slow.log
